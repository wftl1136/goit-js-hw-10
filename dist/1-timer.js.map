{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\r\nimport 'flatpickr/dist/flatpickr.min.css';\r\nimport 'flatpickr/dist/themes/material_blue.css';\r\n\r\nimport iziToast from \"izitoast\";\r\nimport \"izitoast/dist/css/iziToast.min.css\";\r\nimport iconError from '../img/error.svg';\r\nimport iconHello from '../img/hello.svg';\r\n\r\nlet userSelectedDate;\r\nlet interval;\r\nlet newInterval;\r\nconst timer = document.querySelector('.timer');\r\nconst startButton = document.querySelector('button[data-start]');\r\nconst inputData = document.getElementById('datetime-picker');\r\nconst day = document.querySelector('span[data-days]');\r\nconst hour = document.querySelector('span[data-hours]');\r\nconst minute = document.querySelector('span[data-minutes]');\r\nconst second = document.querySelector('span[data-seconds]');\r\n\r\nsetTimeout(() => {\r\n  iziToast.show({\r\n    title: 'Hello',\r\n    message: 'Welcome to Timer!',\r\n    titleColor: '#FFFFFF',\r\n    messageColor: '#FFFFFF',\r\n    position: 'bottomRight',\r\n    backgroundColor: '#0099FF',\r\n    iconUrl: iconHello,\r\n  });\r\n}, 1000);\r\n\r\nconst options = {\r\n  enableTime: true,\r\n  time_24hr: true,\r\n  defaultDate: new Date(),\r\n  minuteIncrement: 1,\r\n  onClose(selectedDates) {\r\n    userSelectedDate = selectedDates[0];\r\n    if (userSelectedDate && userSelectedDate <= new Date()) {\r\n      startButton.setAttribute('disabled', 'true');\r\n\r\n      iziToast.show({\r\n        title: 'Error!',\r\n        message: 'Please choose a date in the future',\r\n        titleColor: '#FFFFFF',\r\n        messageColor: '#FFFFFF',\r\n        position: 'topRight',\r\n        backgroundColor: '#EF4040',\r\n        position: 'topRight',\r\n        iconUrl: iconError,\r\n      });\r\n    } else {\r\n      startButton.removeAttribute('disabled');\r\n    }\r\n  },\r\n};\r\n\r\ndocument.addEventListener('DOMContentLoaded', function () {\r\n  flatpickr('#datetime-picker', options);\r\n});\r\n\r\nstartButton.addEventListener('click', dataTimer);\r\n\r\nfunction dataTimer() {\r\n  if (!userSelectedDate) {\r\n    return;\r\n  }\r\n  inputData.disabled = true;\r\n  const currentDate = new Date();\r\n  let differenceData = userSelectedDate - currentDate;\r\n  startButton.setAttribute('disabled', 'true');\r\n\r\n  interval = setInterval(() => {\r\n    const currentDate = new Date();\r\n    newInterval = userSelectedDate - currentDate;\r\n    if (newInterval <= 0 && differenceData > 0) {\r\n      clearInterval(interval);\r\n      inputData.disabled = false;\r\n      timer.querySelectorAll('.value, .label').forEach(element => {\r\n        element.classList.remove('active');\r\n      });\r\n\r\n      iziToast.show({\r\n        title: 'Warning!',\r\n        message: 'Час до даної події минув!',\r\n        titleColor: '#bd34fe',\r\n        messageColor: '#25acda',\r\n        position: 'center',\r\n        backgroundColor: '#d4cec7f3',\r\n      });\r\n      return;\r\n    }\r\n    displayData();\r\n  }, 1000);\r\n}\r\n\r\nfunction convertMs(ms) {\r\n  // Number of milliseconds per unit of time\r\n  const second = 1000;\r\n  const minute = second * 60;\r\n  const hour = minute * 60;\r\n  const day = hour * 24;\r\n\r\n  // Remaining days\r\n  const days = Math.floor(ms / day);\r\n  // Remaining hours\r\n  const hours = Math.floor((ms % day) / hour);\r\n  // Remaining minutes\r\n  const minutes = Math.floor(((ms % day) % hour) / minute);\r\n  // Remaining seconds\r\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\r\n\r\n  return { days, hours, minutes, seconds };\r\n}\r\n\r\n//console.log(convertMs(2000)); // {days: 0, hours: 0, minutes: 0, seconds: 2}\r\n//console.log(convertMs(140000)); // {days: 0, hours: 0, minutes: 2, seconds: 20}\r\n//console.log(convertMs(24140000)); // {days: 0, hours: 6 minutes: 42, seconds: 20}\r\n\r\nfunction addLeadingZero(value) {\r\n  return value.toString().padStart(2, '0');\r\n}\r\n\r\nfunction displayData(value) {\r\n  timer.querySelectorAll('.value, .label').forEach(element => {\r\n    element.classList.add('active');\r\n  });\r\n  const timeInterval = convertMs(newInterval);\r\n  day.textContent = addLeadingZero(timeInterval.days);\r\n  hour.textContent = addLeadingZero(timeInterval.hours);\r\n  minute.textContent = addLeadingZero(timeInterval.minutes);\r\n  second.textContent = addLeadingZero(timeInterval.seconds);\r\n}"],"names":["userSelectedDate","interval","newInterval","timer","startButton","inputData","day","hour","minute","second","iziToast","iconHello","options","selectedDates","iconError","flatpickr","dataTimer","differenceData","element","displayData","convertMs","ms","days","hours","minutes","seconds","addLeadingZero","value","timeInterval"],"mappings":"4IASA,IAAIA,EACAC,EACAC,EACJ,MAAMC,EAAQ,SAAS,cAAc,QAAQ,EACvCC,EAAc,SAAS,cAAc,oBAAoB,EACzDC,EAAY,SAAS,eAAe,iBAAiB,EACrDC,EAAM,SAAS,cAAc,iBAAiB,EAC9CC,EAAO,SAAS,cAAc,kBAAkB,EAChDC,EAAS,SAAS,cAAc,oBAAoB,EACpDC,EAAS,SAAS,cAAc,oBAAoB,EAE1D,WAAW,IAAM,CACfC,EAAS,KAAK,CACZ,MAAO,QACP,QAAS,oBACT,WAAY,UACZ,aAAc,UACd,SAAU,cACV,gBAAiB,UACjB,QAASC,CACb,CAAG,CACH,EAAG,GAAI,EAEP,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrBb,EAAmBa,EAAc,CAAC,EAC9Bb,GAAoBA,GAAoB,IAAI,MAC9CI,EAAY,aAAa,WAAY,MAAM,EAE3CM,EAAS,KAAK,CACZ,MAAO,SACP,QAAS,qCACT,WAAY,UACZ,aAAc,UACd,SAAU,WACV,gBAAiB,UACjB,SAAU,WACV,QAASI,CACjB,CAAO,GAEDV,EAAY,gBAAgB,UAAU,CAEzC,CACH,EAEA,SAAS,iBAAiB,mBAAoB,UAAY,CACxDW,EAAU,mBAAoBH,CAAO,CACvC,CAAC,EAEDR,EAAY,iBAAiB,QAASY,CAAS,EAE/C,SAASA,GAAY,CACnB,GAAI,CAAChB,EACH,OAEFK,EAAU,SAAW,GAErB,IAAIY,EAAiBjB,EADD,IAAI,KAExBI,EAAY,aAAa,WAAY,MAAM,EAE3CH,EAAW,YAAY,IAAM,CAG3B,GADAC,EAAcF,EADM,IAAI,KAEpBE,GAAe,GAAKe,EAAiB,EAAG,CAC1C,cAAchB,CAAQ,EACtBI,EAAU,SAAW,GACrBF,EAAM,iBAAiB,gBAAgB,EAAE,QAAQe,GAAW,CAC1DA,EAAQ,UAAU,OAAO,QAAQ,CACzC,CAAO,EAEDR,EAAS,KAAK,CACZ,MAAO,WACP,QAAS,4BACT,WAAY,UACZ,aAAc,UACd,SAAU,SACV,gBAAiB,WACzB,CAAO,EACD,MACD,CACDS,GACD,EAAE,GAAI,CACT,CAEA,SAASC,EAAUC,EAAI,CAQrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAMA,SAASC,EAAeC,EAAO,CAC7B,OAAOA,EAAM,SAAU,EAAC,SAAS,EAAG,GAAG,CACzC,CAEA,SAASR,EAAYQ,EAAO,CAC1BxB,EAAM,iBAAiB,gBAAgB,EAAE,QAAQe,GAAW,CAC1DA,EAAQ,UAAU,IAAI,QAAQ,CAClC,CAAG,EACD,MAAMU,EAAeR,EAAUlB,CAAW,EAC1CI,EAAI,YAAcoB,EAAeE,EAAa,IAAI,EAClDrB,EAAK,YAAcmB,EAAeE,EAAa,KAAK,EACpDpB,EAAO,YAAckB,EAAeE,EAAa,OAAO,EACxDnB,EAAO,YAAciB,EAAeE,EAAa,OAAO,CAC1D"}